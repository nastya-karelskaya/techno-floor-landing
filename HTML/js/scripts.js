$(document).ready(function(){function a(){$("#errorModal").modal("show");$(".moda.show form").fadeTo("fast",1,function(){$(this).find(".button").prop("disabled",false)})}function c(i){$(i).trigger("reset")}function b(i){$(i).find("span.file-error.error").removeClass("error");$(i).find(".input-fake.error").removeClass("error");$(i).find("label.error").removeClass("error");$(i).find("input.error").removeClass("error")}$("#freeSampleCta").on("click",function(){var i=$("#freeSampleModal").find("form");$(i).each(function(){b(this);c(this)})});$("#consultationCta").on("click",function(){var i=$("#consultationModal").find("form");$(i).each(function(){b(this);c(this)})});$("#docsCta").on("click",function(){var i=$("#docsModal").find("form");$(i).each(function(){b(this);c(this)})});$("#basePriceCta").on("click",function(){var i=$("#basePriceModal").find("form");$(i).each(function(){b(this);c(this)})});$("#consultationOtherCta").on("click",function(){var i=$("#consultationOtherModal").find("form");$(i).each(function(){b(this);c(this)})});$("#errorModal .close").on("click",function(j){j.preventDefault();var i=$(".modal.show");$(i).each(function(){$("form").trigger("reset");$(this).modal("hide")})});$('input[type="file"]').on("change",function(){$("form span.file-error").removeClass("error");$(".input-fake").removeClass("error")});function h(){var i=document.getElementById("file").files[0];var k="не определилось";if(!i){return 1}var l=i.name.split(".");if(l.length>1){k=l.pop()}var j;if(i.size>(10*1024*1024)){j=false}else{switch(i.type){case"application/pdf":j=true;break;case"application/msword":j=true;break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":j=true;break;case"application/rtf":j=true;break;case"text/richtext":j=true;break;case"application/x-rtf":j=true;break;case"image/jpeg":j=true;break;case"image/pjpeg":j=true;break;case"image/png":j=true;break;case"text/plain":j=true;break;case"application/x-rar-compressed":j=true;break;case"application/octet-stream":j=true;break;case"application/zip":j=true;break;case"application/x-zip-compressed":j=true;break;case"multipart/x-zip":j=true;break;default:j=false}}return j}function d(j,i){var l="input[name="+i+"]";var k=j.find(l).val();return k}function g(i,l,k,j){if(i=="success"){location.href="sps.html"}else{if(i=="bad_type"){a()}else{if(i=="bad_size"){a()}else{a()}}}}function f(k,j,i){$(k).fadeTo("fast",0.15,function(){$(this).find(".button").prop("disabled",true)});$.ajax({url:"php/send.php",type:"POST",data:$(k).serialize()+i,success:function(l){var n=l.message;var m=l.type;g(m,n,j,k)},error:function(l){g("error",l.message,j,k)}})}function e(k,j){var o=k.find(".inputfile");var m=o.prop("files")[0];var n=new FormData();n.append("file",m);if(d(k,"phoneOrEmail")){var i=$(k).find("input#phoneOrEmail1").val();var l=$(k).find("input#companyName1").val();n.append("user_contacts",i);n.append("user_name",l);if(h()){$(k).fadeTo("fast",0.15,function(){$(k).find(".button").prop("disabled",true)});$.ajax({url:"php/upload.php",cache:false,contentType:false,processData:false,data:n,type:"post",success:function(p){var r=p.message;var q=p.type;g(q,r,j,k)},error:function(p){g("error","Ошибка отправки данных",j,k)}})}else{$(k).find(".input-fake").addClass("error");$(k).find("span.file-error").addClass("error")}}else{$(k).find('input[name="phoneOrEmail"]').addClass("error");$(k).find("label.hidden").addClass("error")}}$(".content button.close").on("click",function(j){j.preventDefault();var i=$(this).closest(".modal");$(i).find("label.user_phone").css({color:"#ffffff"});return true});$("input[name='phoneOrEmail']").keydown(function(){$(this).removeClass("error");var i=$(this).closest("form");$(i).find("label.hidden").removeClass("error")});$("input[name='phone']").keydown(function(){$(this).removeClass("error");var i=$(this).closest("form");$(i).find("label.hidden").removeClass("error")});$("input[name='mail']").keydown(function(){$(this).removeClass("error");var i=$(this).closest("form");$(i).find("label.hidden").removeClass("error")});$(".checker").on("click",function(){var i=$(this).closest("form");$(i).find(".checker.active").removeClass("active");$(this).addClass("active")});$(".checker").on("mouseenter",function(){var i=$(this).closest("form");if($(this).hasClass('vb-checker__wrapper')){$(i).find(".captionAppVb").addClass("active");}else {$(i).find(".captionAppWa").addClass("active")}});$(".checker").on("mouseleave",function(){var i=$(this).closest("form");if($(this).hasClass('vb-checker__wrapper')){$(i).find(".captionAppVb").removeClass("active");}else {$(i).find(".captionAppWa").removeClass("active")}});$("#calculations-form__check").on("click",function(){var i=$("#calculations-form").find(".checkmark");if($(i).hasClass("active")){$(i).removeClass("active");$(this).val("off")}else{$(i).addClass("active");$(this).val("on")}});$("#freeSampleModal__form-btn").on("click",function(k){k.preventDefault();var j=$(this).closest("form");var i=$(this).closest("#uploadModal");e(j,i);return false});$("#consultationModal__form-btn").on("click",function(k){k.preventDefault();var j=$(this).closest("form");var i=$(this).closest(".modal");if(d(j,"phone")){f(j,i,"")}else{$(j).find("input#phone1").addClass("error");$(j).find("label.hidden").addClass("error")}return false});$("#consultationModal__form-btn-socials").on("click",function(m){m.preventDefault();var k=$(this).closest("form");var j=$(this).closest(".modal");if(d(k,"phone")){var l=$(k).find(".checker.active");var i;if($(l).hasClass("vb-checker__wrapper")){i="&optionSocials=Viber"}else{i="&optionSocials=WhatsApp"}f(k,j,i)}else{$(k).find("input#phone2").addClass("error");$(k).find("label.hidden").addClass("error")}return false});$("#docsModal__form-btn").on("click",function(m){m.preventDefault();var k=$(this).closest("form");var j=$(this).closest(".modal");if(d(k,"phone")){var l=$(k).find(".checker.active");var i;if($(l).hasClass("vb-checker__wrapper")){i="&optionSocials=Viber"}else{i="&optionSocials=WhatsApp"}f(k,j,i)}else{$(k).find('input[name="phone"]').addClass("error");$(k).find("label.hidden").addClass("error")}return false});$("#basePriceModal__form-btn").on("click",function(o){o.preventDefault();var i=$(this).closest("form");var q=$(this).closest("#basePriceModal");var j=i.find("input[name='mail']").val();var t=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if((d(i,"mail"))&&t.test(j)){var m=new FormData();var l=$(i).find("input#mail1").val();var s=$("#calculations-form").find("input#input_square").val();var n=$("#calculations-form").find("select#input_material").val();var p=$("#calculations-form").find("select#input_system").val();var r=$("#calculations-form").find("select#input_fl_function").val();var k=$("#calculations-form").find("input#calculations-form__check").val();m.append("mail",l);m.append("optionCalculator","calculator");m.append("square",s);m.append("material",n);m.append("floorSystem",p);m.append("floorFunction",r);m.append("isRulerNeeded",k);$(i).fadeTo("fast",0.15,function(){$(this).find(".button").prop("disabled",true)});$.ajax({url:"php/send.php",cache:false,contentType:false,processData:false,data:m,type:"post",success:function(u){var w=u.message;var v=u.type;if(v=="success"){location.href="sps.html"}else{g(v,w,q,i)}},error:function(u){g(messageType,messageText,q,i)}})}else{$(i).find('input[name="mail"]').addClass("error");$(i).find("label.hidden").addClass("error")}return false});$("#basePriceModal__form-btn-2").on("click",function(o){o.preventDefault();var i=$(this).closest("form");var r=$(this).closest(".modal");var j=i.find("input[name='mail']").val();var u=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if((d(i,"phone"))||u.test(j)){var m=new FormData();var l=$(i).find("input#mail2").val();var p=$(i).find("input#phone4").val();var t=$("#calculations-form").find("input#input_square").val();var n=$("#calculations-form").find("select#input_material").val();var q=$("#calculations-form").find("select#input_system").val();var s=$("#calculations-form").find("select#input_fl_function").val();var k=$("#calculations-form").find("input#calculations-form__check").val();m.append("phone",p);m.append("mail",l);m.append("optionCalculator","calculator");m.append("square",t);m.append("material",n);m.append("floorSystem",q);m.append("floorFunction",s);m.append("isRulerNeeded",k);$(i).fadeTo("fast",0.15,function(){$(this).find(".button").prop("disabled",true)});$.ajax({url:"php/send.php",cache:false,contentType:false,processData:false,data:m,type:"post",success:function(v){var x=v.message;var w=v.type;if(w=="success"){location.href="sps.html"}else{g(w,x,r,i)}},error:function(v){g(messageType,messageText,r,i)}})}else{$(i).find("label.hidden").addClass("error")}return false});$("#consultationOther__form-btn").on("click",function(m){m.preventDefault();var k=$(this).closest("form");var j=$(this).closest(".modal");if(d(k,"phone")){var l=$(k).find(".checker.active");var i;if($(l).hasClass("vb-checker__wrapper")){i="&optionSocials=Viber"}else{i="&optionSocials=WhatsApp"}f(k,j,i)}else{$(k).find('input[name="phone"]').addClass("error");$(k).find("label.hidden").addClass("error")}return false})});